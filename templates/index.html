<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mini web clothing</title>

    <link rel="stylesheet" href="static/css/style.css">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Jost:ital,wght@0,100..900;1,100..900&family=Miniver&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css"
        integrity="sha512-2SwdPD6INVrV/lHTZbO2nodKhrnDdJK9/kg2XD1r9uGqPo1cUbujc+IYdlYdEErWNu69gVcYgdxlmVmzTWnetw=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://unpkg.com/boxicons@latest/css/boxicons.min.css">
</head>

<body>
    <header>
        <a href="#" class="logo" aria-label="Trang chủ"><img src="static/image/logo.png"
                alt="Mini web clothing logo"></a>

        <ul class="navmenu">
            <li><a href="#">Home</a></li>
            <li class="dropdown">
                <a href="#trending" class="dropbtn">Products <i class='bx bx-chevron-down'></i></a>
                <div class="dropdown-content">
                    <a href="#" onclick="showProducts('all')">Shop All</a>
                    <a href="#" onclick="showProducts('men')">Men</a>
                    <a href="#" onclick="showProducts('women')">Women</a>
                    <a href="#" onclick="showProducts('new')">NEW</a>
                </div>
            </li>
            <li><a href="#feedback">New Updates</a></li>
            <li><a href="#reviews">Feedback</a></li>
            <li><a href="#contact">Contact</a></li>
        </ul>

        <div class="nav-icon">
            <a href="#" id="searchIcon" aria-label="Search"><i class='bx bx-search'></i></a>
            <input type="text" id="searchInput" placeholder="Tìm sản phẩm..."
                onkeydown="if(event.key==='Enter'){searchProducts();}">

            <a href="#" id="userIcon" aria-label="User Account"><i class="bx bx-user"></i></a>
            <a href="#" id="cartIcon" aria-label="Shopping Cart" onclick="openCartModal()"><i
                    class='bx bx-cart'></i></a>
            <div class="bx bx-menu" id="menu-icon" aria-label="Menu"></div>
        </div>
    </header>

    <div id="authModal" class="modal">
        <div class="modal-content" id="modalContent">
            <div class="modal-header">
                <h2 id="modalTitle">Login</h2>
                <span class="close" onclick="closeModal()">&times;</span>
            </div>
            <div class="modal-body">
                <div class="welcome-text">
                    <h1 id="welcomeTitle">Welcome back!</h1>
                    <p id="welcomeSubtitle">Please login to access your account</p>
                </div>

                <div id="messageContainer"></div>

                <div id="loginForm" class="form-container active">
                    <form onsubmit="handleLogin(event)">
                        <div class="form-group">
                            <label for="loginUsername">Email</label>
                            <input type="text" id="loginUsername" required placeholder="Enter your email"
                                oninput="checkLoginForm()">
                        </div>
                        <div class="form-group">
                            <label for="loginPassword">Password</label>
                            <input type="password" id="loginPassword" required placeholder="Enter your password"
                                oninput="checkLoginForm()">
                        </div>
                        <a href="#" class="forgot-password">Forgot your password?</a>
                        <button type="submit" class="submit-btn" id="loginBtn">Login to your account</button>
                    </form>

                    <div class="signup-section">
                        <h3>Not a customer yet?</h3>
                        <button class="create-account-btn" onclick="showRegister()">Create an account</button>
                    </div>
                </div>

                <div id="registerForm" class="form-container">
                    <form onsubmit="handleRegister(event)">
                        <div class="form-group">
                            <label for="regUsername">Username</label>
                            <input type="text" id="regUsername" required minlength="3"
                                placeholder="At least 3 characters" oninput="checkRegisterForm()">
                        </div>
                        <div class="form-group">
                            <label for="regEmail">Email</label>
                            <input type="email" id="regEmail" required placeholder="example@email.com"
                                oninput="checkRegisterForm()">
                        </div>
                        <div class="form-group">
                            <label for="regPassword">Password</label>
                            <input type="password" id="regPassword" required minlength="6"
                                placeholder="At least 6 characters" oninput="checkRegisterForm()">
                        </div>
                        <div class="form-group">
                            <label for="regConfirmPassword">Confirm Password</label>
                            <input type="password" id="regConfirmPassword" required placeholder="Re-enter your password"
                                oninput="checkRegisterForm()">
                        </div>
                        <button type="submit" class="submit-btn" id="registerBtn">Create an account</button>
                    </form>

                    <div class="signup-section">
                        <h3>Already have an account?</h3>
                        <button class="create-account-btn" onclick="showLogin()">Login here</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="cartModal" class="modal">
        <div class="modal-content cart-modal-content" id="cartModalContent">
            <div class="modal-header">
                <h2>Giỏ hàng của bạn</h2>
                <span class="close" onclick="closeCartModal()">&times;</span>
            </div>
            <div class="modal-body cart-modal-body">
                <div id="cartItems"></div>
                <div id="cartEmpty">
                    <p>Giỏ hàng của bạn đang trống</p>
                    <button type="button" class="create-account-btn" onclick="closeCartModal()">Tiếp tục mua
                        sắm</button>
                </div>

                <div id="cartSummary">
                    <div id="cartSummaryRow">
                        <span>Tổng cộng:</span>
                        <span id="cartTotal">$0</span>
                    </div>
                    <button type="button" class="create-account-btn" id="checkoutBtn" onclick="checkout()">Thanh
                        toán</button>
                </div>
            </div>
        </div>
    </div>

    <div id="logoutModal" class="modal">
        <div class="modal-content logout-modal-content" id="logoutModalContent">
            <span class="close" onclick="closeLogoutModal()">&times;</span>
            <div class="logout-message">
                <i class='bx bx-log-out-circle'></i>
                <p id="logoutUsername"></p>
                <p class="logout-confirm-text">Bạn có chắc muốn đăng xuất?</p>
            </div>
            <div class="logout-actions">
                <button type="button" id="confirmLogoutBtn" onclick="confirmLogout()">Đăng xuất</button>
                <button type="button" id="cancelLogoutBtn" onclick="closeLogoutModal()">Hủy</button>
            </div>
        </div>
    </div>

    <div id="productDetailModal" class="modal">
        <div class="modal-content product-detail-content" id="productDetailContent">
            <span class="close" onclick="closeProductDetail()">&times;</span>
            <div class="product-detail-body">
                <div class="product-detail-image">
                    <img id="detailImage" src="" alt="">
                </div>
                <div class="product-detail-info">
                    <div id="detailTag" class="product-tag"></div>
                    <h2 id="detailName"></h2>
                    <div class="product-rating">
                        <div class="stars" id="detailStars"></div>
                        <span id="detailRating"></span>
                    </div>
                    <div class="product-price">
                        <p id="detailPrice"></p>
                    </div>
                    <div class="product-colors">
                        <p>Available Colors: <span id="detailColors"></span></p>
                    </div>
                    <div class="product-description">
                        <p id="detailDescription">Mô tả sản phẩm sẽ hiện ở đây...</p>
                    </div>
                    <div class="product-quantity">
                        <label for="detailQty">Quantity:</label>
                        <div class="qty-selector">
                            <button type="button" onclick="decreaseQty()">-</button>
                            <input type="number" id="detailQty" value="1" min="1">
                            <button type="button" onclick="increaseQty()">+</button>
                        </div>
                    </div>

                    <button type="button" class="create-account-btn" id="addToCartDetailBtn"
                        onclick="addToCartDetail()">Thêm vào giỏ</button>
                </div>
            </div>
        </div>
    </div>

    <section class="main-home">
        <div class="main-text">
            <h5>Winter Collection</h5>
            <h1>New Winter <br> Collection 2025</h1>
            <p>There's Nothing like Trend</p>
            <a href="#trending" class="main-btn">Shop Now <i class='bx bx-right-arrow-alt'></i></a>
        </div>

        <div class="down-arrow">
            <a href="#trending" class="down" aria-label="Cuộn xuống"><i class='bx bx-down-arrow-alt'></i></a>
        </div>
    </section>

    <section class="trending-product" id="trending">
        <div class="center-text">
            <h2>Our Trending <span>products</span></h2>
        </div>
        <div class="products">
        </div>
    </section>

    <section class="product-listing" id="productListing">
        <div class="center-text">
            <h2>Our <span id="categoryTitle">Products</span></h2>
        </div>
        <div class="products" id="productGrid">
        </div>
    </section>

    <section class="clients-reviews" id="reviews">
        <div class="reviews-container">
            <div class="center-text">
                <h2>Client <span>Reviews</span></h2>
            </div>

            <div id="reviewList" class="review-list"></div>

            <div id="reviewFormContainer" class="review-form-box">
                <h3>Viết đánh giá của bạn</h3>
                <form onsubmit="submitReview(event)">
                    <div class="textarea-wrapper">
                        <textarea id="reviewContent" placeholder="Chia sẻ cảm nghĩ của bạn..." required></textarea>

                        <div class="quick-tags">
                            <span class="tag-item" onclick="addTag(this)">Chất lượng sản phẩm tuyệt vời</span>
                            <span class="tag-item" onclick="addTag(this)">Đóng gói sản phẩm rất đẹp</span>
                            <span class="tag-item" onclick="addTag(this)">Shop phục vụ rất tốt</span>
                            <span class="tag-item" onclick="addTag(this)">Rất đáng tiền</span>
                            <span class="tag-item" onclick="addTag(this)">Giao hàng nhanh</span>
                            <span class="tag-item" onclick="addTag(this)">Đúng mô tả</span>
                        </div>
                    </div>

                    <div class="form-actions-modern">
                        <div class="rating-group">
                            <div class="stars-input">
                                <i class='bx bxs-star star-item active' data-value="1"></i>
                                <i class='bx bxs-star star-item active' data-value="2"></i>
                                <i class='bx bxs-star star-item active' data-value="3"></i>
                                <i class='bx bxs-star star-item active' data-value="4"></i>
                                <i class='bx bxs-star star-item active' data-value="5"></i>
                            </div>
                            <span id="ratingText" class="rating-text">Tuyệt vời</span>
                            <input type="hidden" id="reviewRating" value="5">
                        </div>

                        <button type="submit" class="submit-red-btn">Gửi đánh giá</button>
                    </div>
                </form>
            </div>

            <div id="loginWarning">
                <p>Vui lòng <a href="#" onclick="document.getElementById('userIcon').click();">Đăng nhập</a> để viết
                    đánh giá.</p>
            </div>
        </div>
    </section>
    <script type="module" src="static/js/review.js"></script>

    <section class="update-news" id="feedback">
        <div class="up-center-text">
            <h2>New Updates</h2>
        </div>

        <div class="update-cart" id="newsContainer">
        </div>
    </section>

    <script type="module" src="static/js/news.js"></script>
</body>


</html>

<section class="contact" id="contact">
    <div class="contact-info">
        <div class="first-info">
            <img src="static/image/logo.png" alt="">
            <p> 139 Tam Trinh , <br>Thanh pho Ha Noi</p>
            <p>0342067955</p>
            <p>tamkudo123@gmail.com</p>
            <div class="social-icon">
                <a href="https://www.facebook.com/truongminhtam2309/" target="_blank" rel="noopener noreferrer"
                    aria-label="Facebook">
                    <i class="bx bxl-facebook"></i>
                </a>

                <a href="https://twitter.com" target="_blank" rel="noopener noreferrer" aria-label="Twitter">
                    <i class="bx bxl-twitter"></i>
                </a>

                <a href="https://www.instagram.com/just.wepotmt/" target="_blank" rel="noopener noreferrer"
                    aria-label="Instagram">
                    <i class="bx bxl-instagram"></i>
                </a>

                <a href="https://www.youtube.com/@truongminhtam4088" target="_blank" rel="noopener noreferrer"
                    aria-label="YouTube">
                    <i class="bx bxl-youtube"></i>
                </a>

                <a href="https://www.tiktok.com/@greyrat.293" target="_blank" rel="noopener noreferrer"
                    aria-label="TikTok">
                    <i class="bx bxl-tiktok"></i>
                </a>

            </div>

        </div>
        <div class="second-info">
            <h4>Support</h4>
            <p>Contact us</p>
            <p>About us</p>
            <p>Shopping </p>
            <p>Privacy</p>
        </div>

        <div class="third-info">
            <h4>Shop</h4>
            <p>Men's Shopping</p>
            <p>Women's Shopping</p>
            <p>Kids's Shopping</p>
            <p>Furniture</p>
            <p>Discount</p>
        </div>

        <div class="fourth-info">
            <h4>Company</h4>
            <p>About</p>
            <p>Blog</p>
            <p>Afillate</p>
            <p>Login</p>
        </div>

        <div class="five">
            <h4>Subcribe</h4>
            <p>Receive Updates, Hot Deals, Discounts Sent Straight In Your Inbox Daily</p>
            <p>ABCDEFGHIK</p>
        </div>
    </div>
</section>

<div class="end-text">
    <p>Copyright @2025. All Rights Reserved. Design by Truong Minh Tam.</p>
</div>


<script type="module" src="static/js/api.js"></script>
<script type="module" src="static/js/menu.js"></script>
<script type="module" src="static/js/cart.js"></script>
<script type="module" src="static/js/productDetail.js"></script>
<script type="module" src="static/js/product.js"></script>
<script type="module" src="static/js/auth.js"></script>
</body>

</html>

<script>
    // Script kiểm tra quyền Admin để hiện nút
    document.addEventListener('DOMContentLoaded', () => {
        const user = JSON.parse(localStorage.getItem('currentUser'));

        // SỬA Ở ĐÂY: Đổi .header-icon thành .nav-icon cho đúng với HTML của bạn
        const navIconGroup = document.querySelector('.nav-icon');

        // 1. Kiểm tra xem có phải Admin không
        if (user && user.role === 'admin') {
            console.log("Đã phát hiện Admin, đang tạo nút..."); // Dòng này để kiểm tra xem code có chạy không

            // 2. Tạo nút Admin
            const adminBtn = document.createElement('a');
            adminBtn.href = '/admin';
            // Thêm class cho đẹp và dễ chỉnh CSS nếu cần
            adminBtn.className = 'admin-btn-link';
            adminBtn.innerHTML = '<i class="bx bxs-dashboard" style="font-size: 24px; color: #e74c3c;" title="Trang quản trị"></i>';
            adminBtn.style.marginRight = "15px";

            // 3. Chèn nó vào đầu tiên trong nhóm icon
            if (navIconGroup) {
                navIconGroup.insertBefore(adminBtn, navIconGroup.firstChild);
            } else {
                console.error("Không tìm thấy class .nav-icon");
            }
        }
    });
</script>